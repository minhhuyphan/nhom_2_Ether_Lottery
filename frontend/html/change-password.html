<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Ether Lottery - ƒê·ªïi M·∫≠t Kh·∫©u</title>
    <link rel="stylesheet" href="../css/variables.css" />
    <link rel="stylesheet" href="../css/base.css" />
    <link rel="stylesheet" href="../css/change-password.css" />
    <script src="../js/theme.js"></script>
  </head>
  <body>
    <div class="password-container">
      <div class="password-card">
        <div class="card-header">
          <div class="logo-section">
            <img src="../icon/logo.png" alt="Logo" class="logo-img" />
            <h1>Ether Lottery</h1>
          </div>
          <h2>ƒê·ªïi M·∫≠t Kh·∫©u</h2>
          <p>Vui l√≤ng nh·∫≠p th√¥ng tin ƒë·ªÉ thay ƒë·ªïi m·∫≠t kh·∫©u c·ªßa b·∫°n</p>
        </div>

        <form class="password-form" id="changePasswordForm">
          <div class="input-group">
            <label>M·∫≠t kh·∫©u hi·ªán t·∫°i</label>
            <div class="input-wrapper">
              <span class="input-icon">üîí</span>
              <input
                type="password"
                id="current-password"
                placeholder="Nh·∫≠p m·∫≠t kh·∫©u hi·ªán t·∫°i"
                required
              />
            </div>
          </div>

          <div class="input-group">
            <label>M·∫≠t kh·∫©u m·ªõi</label>
            <div class="input-wrapper">
              <span class="input-icon">üîê</span>
              <input
                type="password"
                id="new-password"
                placeholder="Nh·∫≠p m·∫≠t kh·∫©u m·ªõi"
                required
              />
            </div>
          </div>

          <div class="input-group">
            <label>X√°c nh·∫≠n m·∫≠t kh·∫©u m·ªõi</label>
            <div class="input-wrapper">
              <span class="input-icon">‚úì</span>
              <input
                type="password"
                id="confirm-password"
                placeholder="Nh·∫≠p l·∫°i m·∫≠t kh·∫©u m·ªõi"
                required
              />
            </div>
          </div>

          <div class="requirements-box">
            <div class="requirements-title">Y√™u c·∫ßu m·∫≠t kh·∫©u:</div>
            <div class="requirements-list">
              <div class="requirement" id="length-check">
                <span class="check-icon">‚óã</span>
                <span>√çt nh·∫•t 8 k√Ω t·ª±</span>
              </div>
              <div class="requirement" id="case-check">
                <span class="check-icon">‚óã</span>
                <span>Ch·ªØ hoa v√† ch·ªØ th∆∞·ªùng</span>
              </div>
              <div class="requirement" id="number-check">
                <span class="check-icon">‚óã</span>
                <span>√çt nh·∫•t 1 s·ªë</span>
              </div>
              <div class="requirement" id="special-check">
                <span class="check-icon">‚óã</span>
                <span>√çt nh·∫•t 1 k√Ω t·ª± ƒë·∫∑c bi·ªát</span>
              </div>
            </div>
          </div>

          <button type="submit" class="submit-btn">
            <span>ƒê·ªïi M·∫≠t Kh·∫©u</span>
            <span class="btn-arrow">‚Üí</span>
          </button>

          <a href="admin-profile.html" class="back-link">
            <span>‚Üê</span> Quay l·∫°i H·ªì S∆°
          </a>
        </form>
      </div>
    </div>

    <script>
      const newPasswordInput = document.getElementById("new-password");
      const requirements = {
        length: document.getElementById("length-check"),
        case: document.getElementById("case-check"),
        number: document.getElementById("number-check"),
        special: document.getElementById("special-check"),
      };

      newPasswordInput.addEventListener("input", function () {
        const password = this.value;

        // Length check
        updateRequirement(requirements.length, password.length >= 8);

        // Case check
        updateRequirement(
          requirements.case,
          /[a-z]/.test(password) && /[A-Z]/.test(password)
        );

        // Number check
        updateRequirement(requirements.number, /\d/.test(password));

        // Special character check
        updateRequirement(
          requirements.special,
          /[!@#$%^&*(),.?":{}|<>]/.test(password)
        );
      });

      function updateRequirement(element, isValid) {
        const icon = element.querySelector(".check-icon");
        if (isValid) {
          element.classList.add("valid");
          icon.textContent = "‚úì";
        } else {
          element.classList.remove("valid");
          icon.textContent = "‚óã";
        }
      }

      document
        .getElementById("changePasswordForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();

          const currentPassword =
            document.getElementById("current-password").value;
          const newPassword = document.getElementById("new-password").value;
          const confirmPassword =
            document.getElementById("confirm-password").value;

          if (!currentPassword || !newPassword || !confirmPassword) {
            alert("Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin");
            return;
          }

          if (newPassword !== confirmPassword) {
            alert("M·∫≠t kh·∫©u x√°c nh·∫≠n kh√¥ng kh·ªõp");
            return;
          }

          if (newPassword.length < 8) {
            alert("M·∫≠t kh·∫©u ph·∫£i c√≥ √≠t nh·∫•t 8 k√Ω t·ª±");
            return;
          }

          if (!/[a-z]/.test(newPassword) || !/[A-Z]/.test(newPassword)) {
            alert("M·∫≠t kh·∫©u ph·∫£i c√≥ ch·ªØ hoa v√† ch·ªØ th∆∞·ªùng");
            return;
          }

          if (!/\d/.test(newPassword)) {
            alert("M·∫≠t kh·∫©u ph·∫£i c√≥ √≠t nh·∫•t 1 s·ªë");
            return;
          }

          if (!/[!@#$%^&*(),.?":{}|<>]/.test(newPassword)) {
            alert("M·∫≠t kh·∫©u ph·∫£i c√≥ √≠t nh·∫•t 1 k√Ω t·ª± ƒë·∫∑c bi·ªát");
            return;
          }

          alert("ƒê·ªïi m·∫≠t kh·∫©u th√†nh c√¥ng!");
          window.location.href = "admin-profile.html";
        });
    </script>
  </body>
</html>
