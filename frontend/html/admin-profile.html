<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Ether Lottery - Admin Profile</title>
    <!-- Modular CSS -->
    <link rel="stylesheet" href="../css/variables.css" />
    <link rel="stylesheet" href="../css/base.css" />
    <link rel="stylesheet" href="../css/navigation.css" />
    <link rel="stylesheet" href="../css/buttons.css" />
    <link rel="stylesheet" href="../css/icons.css" />
    <link rel="stylesheet" href="../css/components.css" />
    <link rel="stylesheet" href="../css/responsive.css" />
    <link rel="stylesheet" href="../css/admin.css" />
    <link rel="stylesheet" href="../css/admin-profile.css" />
    <link rel="stylesheet" href="../css/modals.css" />
    <script src="../js/theme.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/web3@1.8.0/dist/web3.min.js"></script>
  </head>
  <body>
    <div id="app">
      <!-- Sidebar Navigation -->
      <aside class="admin-sidebar">
        <div class="sidebar-header">
          <div class="logo">
            <img src="../icon/logo.png" alt="Logo" class="logo-img" />
            <span>Ether Lottery</span>
          </div>
        </div>

        <nav class="sidebar-nav">
          <a href="admin.html" class="sidebar-item">
            <img
              src="../icon/tro_choi.png"
              alt="Lottery"
              class="sidebar-icon"
            />
            <span>Quay S·ªë Tr√∫ng Th∆∞·ªüng</span>
          </a>
          <a href="admin-history.html" class="sidebar-item">
            <img
              src="../icon/lich_su_tham_gia.png"
              alt="History"
              class="sidebar-icon"
            />
            <span>L·ªãch S·ª≠</span>
          </a>
          <a href="admin-profile.html" class="sidebar-item active">
            <img src="../icon/ho_so.png" alt="Profile" class="sidebar-icon" />
            <span>H·ªì S∆° Admin</span>
          </a>
          <a href="admin-finance.html" class="sidebar-item">
            <img
              src="../icon/tui_tien.png"
              alt="Finance"
              class="sidebar-icon"
            />
            <span>T√†i Ch√≠nh</span>
          </a>
        </nav>

        <div class="sidebar-footer">
          <div class="admin-profile">
            <div class="admin-avatar">
              <img src="../icon/tai_khoan.png" alt="Admin" />
            </div>
            <div class="admin-info">
              <div class="admin-name">admin</div>
              <div class="admin-role">Administrator</div>
            </div>
          </div>
          <a href="login.html" class="btn-logout"> <span>‚Üê</span> ƒêƒÉng Xu·∫•t </a>
        </div>
      </aside>

      <!-- Main Content Area -->
      <main class="admin-main">
        <!-- Top Bar -->
        <header class="admin-header">
          <div class="header-left">
            <h1>
              <img src="../icon/ho_so.png" alt="Profile" class="inline-icon" />
              H·ªì S∆° Qu·∫£n Tr·ªã Vi√™n
            </h1>
          </div>
          <div class="header-right">
            <div class="network-status">
              <span class="status-dot"></span>
              <span id="network-name">Sepolia Testnet</span>
            </div>
            <button class="btn-primary" id="connect-wallet-btn">
              <span>ü¶ä</span>
              <span id="wallet-status">Connect MetaMask</span>
            </button>
          </div>
        </header>

        <!-- Profile Content -->
        <div class="admin-content">
          <!-- Admin Info Card -->
          <div class="admin-profile-hero">
            <div class="profile-banner">
              <div class="banner-overlay"></div>
            </div>
            <div class="profile-info-wrapper">
              <div class="profile-avatar-section">
                <div class="admin-avatar-large">
                  <img src="../icon/tai_khoan.png" alt="Admin Avatar" />
                  <div class="avatar-badge">üëë</div>
                </div>
                <div class="profile-main-info">
                  <h1 class="admin-display-name">Administrator</h1>
                  <p class="admin-username">@admin</p>
                  <div class="admin-badges">
                    <span class="badge badge-admin">
                      <img
                        src="../icon/bao_mat.png"
                        alt="Verified"
                        class="badge-icon"
                      />
                      Qu·∫£n Tr·ªã Vi√™n
                    </span>
                    <span class="badge badge-verified">
                      <img
                        src="../icon/cup.png"
                        alt="Active"
                        class="badge-icon"
                      />
                      ƒê√£ X√°c Th·ª±c
                    </span>
                  </div>
                </div>
              </div>
              <div class="profile-quick-stats">
                <div class="quick-stat-item">
                  <div class="quick-stat-value" id="quick-lotteries">0</div>
                  <div class="quick-stat-label">V√≤ng Quay</div>
                </div>
                <div class="quick-stat-item">
                  <div class="quick-stat-value" id="quick-players">0</div>
                  <div class="quick-stat-label">Ng∆∞·ªùi Ch∆°i</div>
                </div>
                <div class="quick-stat-item">
                  <div class="quick-stat-value" id="quick-winners">0</div>
                  <div class="quick-stat-label">Ng∆∞·ªùi Th·∫Øng</div>
                </div>
              </div>
            </div>
          </div>

          <!-- Info Grid -->
          <div class="profile-card account-info-dashboard">
            <div class="card-header">
              <h2>
                <img
                  src="../icon/tai_khoan.png"
                  alt="Account"
                  class="inline-icon"
                />
                Th√¥ng Tin T√†i Kho·∫£n
              </h2>
            </div>

            <div class="account-info-grid">
              <div class="account-info-card">
                <div class="account-card-content">
                  <div class="account-icon-box">
                    <div class="info-icon-large">üìß</div>
                  </div>
                  <div class="account-details">
                    <div class="account-label">Email</div>
                    <div class="account-value" id="admin-email">
                      admin@etherlottery.com
                    </div>
                  </div>
                </div>
              </div>

              <div class="account-info-card">
                <div class="account-card-content">
                  <div class="account-icon-box">
                    <div class="info-icon-large">üìÖ</div>
                  </div>
                  <div class="account-details">
                    <div class="account-label">Ng√†y Tham Gia</div>
                    <div class="account-value" id="admin-joined">
                      01/01/2024
                    </div>
                  </div>
                </div>
              </div>

              <div class="account-info-card">
                <div class="account-card-content">
                  <div class="account-icon-box">
                    <div class="info-icon-large">üîê</div>
                  </div>
                  <div class="account-details">
                    <div class="account-label">B·∫£o M·∫≠t</div>
                    <div class="account-value">
                      <span class="security-badge active">2FA Enabled</span>
                    </div>
                  </div>
                </div>
              </div>

              <div class="account-info-card">
                <div class="account-card-content">
                  <div class="account-icon-box">
                    <div class="info-icon-large">‚ö°</div>
                  </div>
                  <div class="account-details">
                    <div class="account-label">Tr·∫°ng Th√°i</div>
                    <div class="account-value">
                      <span class="status-badge online">
                        <span class="status-dot"></span>
                        ƒêang Ho·∫°t ƒê·ªông
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Stats Dashboard -->
          <div class="profile-card stats-dashboard">
            <div class="card-header">
              <h2>
                <img
                  src="../icon/thong_ke.png"
                  alt="Stats"
                  class="inline-icon"
                />
                Th·ªëng K√™ T·ªïng Quan
              </h2>
            </div>

            <div class="stats-grid-modern">
              <div class="stat-card-modern primary">
                <div class="stat-card-content">
                  <div class="stat-icon-modern">
                    <img src="../icon/tro_choi.png" alt="Lottery" />
                  </div>
                  <div class="stat-details">
                    <div class="stat-value-modern" id="total-lotteries">0</div>
                    <div class="stat-label-modern">T·ªïng V√≤ng Quay</div>
                    <div class="stat-change positive">‚Üë 12% th√°ng n√†y</div>
                  </div>
                </div>
              </div>

              <div class="stat-card-modern success">
                <div class="stat-card-content">
                  <div class="stat-icon-modern">
                    <img src="../icon/nguoi_choi.png" alt="Players" />
                  </div>
                  <div class="stat-details">
                    <div class="stat-value-modern" id="total-players">0</div>
                    <div class="stat-label-modern">T·ªïng Ng∆∞·ªùi Ch∆°i</div>
                    <div class="stat-change positive">‚Üë 8% th√°ng n√†y</div>
                  </div>
                </div>
              </div>

              <div class="stat-card-modern warning">
                <div class="stat-card-content">
                  <div class="stat-icon-modern">
                    <img src="../icon/tui_tien.png" alt="Money" />
                  </div>
                  <div class="stat-details">
                    <div class="stat-value-modern">
                      <span id="total-volume">0.000</span> ETH
                    </div>
                    <div class="stat-label-modern">T·ªïng Giao D·ªãch</div>
                    <div class="stat-change positive">‚Üë 15% th√°ng n√†y</div>
                  </div>
                </div>
              </div>

              <div class="stat-card-modern info">
                <div class="stat-card-content">
                  <div class="stat-icon-modern">
                    <img src="../icon/cup.png" alt="Winners" />
                  </div>
                  <div class="stat-details">
                    <div class="stat-value-modern" id="total-winners">0</div>
                    <div class="stat-label-modern">Ng∆∞·ªùi Th·∫Øng</div>
                    <div class="stat-change neutral">‚Üí ·ªîn ƒë·ªãnh</div>
                  </div>
                </div>
              </div>

              <div class="stat-card-modern secondary">
                <div class="stat-card-content">
                  <div class="stat-icon-modern">
                    <img src="../icon/ve.png" alt="Tickets" />
                  </div>
                  <div class="stat-details">
                    <div class="stat-value-modern" id="total-tickets">0</div>
                    <div class="stat-label-modern">V√© ƒê√£ B√°n</div>
                    <div class="stat-change positive">‚Üë 10% th√°ng n√†y</div>
                  </div>
                </div>
              </div>

              <div class="stat-card-modern highlight">
                <div class="stat-card-content">
                  <div class="stat-icon-modern">
                    <img src="../icon/eth_thang.png" alt="Revenue" />
                  </div>
                  <div class="stat-details">
                    <div class="stat-value-modern">
                      <span id="total-revenue">0.000</span> ETH
                    </div>
                    <div class="stat-label-modern">Ph√≠ Qu·∫£n L√Ω</div>
                    <div class="stat-change positive">‚Üë 18% th√°ng n√†y</div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Security & Actions -->
          <div class="profile-grid-actions">
            <div class="profile-card security-card">
              <div class="card-header">
                <h2>
                  <img
                    src="../icon/bao_mat.png"
                    alt="Security"
                    class="inline-icon"
                  />
                  B·∫£o M·∫≠t
                </h2>
              </div>
              <div class="security-list">
                <div class="security-item enabled">
                  <div class="security-icon">üîê</div>
                  <div class="security-info">
                    <div class="security-title">X√°c th·ª±c 2 y·∫øu t·ªë</div>
                    <div class="security-status">ƒêang b·∫≠t</div>
                  </div>
                  <label class="toggle-switch">
                    <input type="checkbox" id="toggle-2fa" checked />
                    <span class="toggle-slider"></span>
                  </label>
                </div>
                <div class="security-item enabled">
                  <div class="security-icon">üìß</div>
                  <div class="security-info">
                    <div class="security-title">Th√¥ng b√°o email</div>
                    <div class="security-status">ƒêang b·∫≠t</div>
                  </div>
                  <label class="toggle-switch">
                    <input type="checkbox" id="toggle-email" checked />
                    <span class="toggle-slider"></span>
                  </label>
                </div>
                <div class="security-item disabled">
                  <div class="security-icon">üîë</div>
                  <div class="security-info">
                    <div class="security-title">API Access</div>
                    <div class="security-status">ƒêang t·∫Øt</div>
                  </div>
                  <label class="toggle-switch">
                    <input type="checkbox" id="toggle-api" />
                    <span class="toggle-slider"></span>
                  </label>
                </div>
              </div>
            </div>

            <div class="profile-card actions-card">
              <div class="card-header">
                <h2>
                  <img
                    src="../icon/cai_dat.png"
                    alt="Actions"
                    class="inline-icon"
                  />
                  Thao T√°c Nhanh
                </h2>
              </div>
              <div class="quick-actions">
                <button
                  class="action-btn"
                  onclick="window.location.href='change-password.html'"
                >
                  <img src="../icon/mat_khau.png" alt="Password" />
                  <span>ƒê·ªïi M·∫≠t Kh·∫©u</span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <!-- Modals -->
    <!-- Change Password Modal -->
    <div id="changePasswordModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>
            <img
              src="../icon/mat_khau.png"
              alt="Password"
              class="inline-icon"
            />
            ƒê·ªïi M·∫≠t Kh·∫©u
          </h2>
          <button
            class="modal-close"
            onclick="closeModal('changePasswordModal')"
          >
            &times;
          </button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label for="current-password">M·∫≠t kh·∫©u hi·ªán t·∫°i</label>
            <input
              type="password"
              id="current-password"
              placeholder="Nh·∫≠p m·∫≠t kh·∫©u hi·ªán t·∫°i"
              title="M·∫≠t kh·∫©u hi·ªán t·∫°i"
            />
          </div>
          <div class="form-group">
            <label for="new-password">M·∫≠t kh·∫©u m·ªõi</label>
            <input
              type="password"
              id="new-password"
              placeholder="Nh·∫≠p m·∫≠t kh·∫©u m·ªõi"
              title="M·∫≠t kh·∫©u m·ªõi"
            />
          </div>
          <div class="form-group">
            <label for="confirm-password">X√°c nh·∫≠n m·∫≠t kh·∫©u m·ªõi</label>
            <input
              type="password"
              id="confirm-password"
              placeholder="Nh·∫≠p l·∫°i m·∫≠t kh·∫©u m·ªõi"
              title="X√°c nh·∫≠n m·∫≠t kh·∫©u"
            />
          </div>
          <div class="password-requirements">
            <p>M·∫≠t kh·∫©u ph·∫£i c√≥:</p>
            <ul>
              <li>√çt nh·∫•t 8 k√Ω t·ª±</li>
              <li>Ch·ªØ hoa v√† ch·ªØ th∆∞·ªùng</li>
              <li>√çt nh·∫•t 1 s·ªë</li>
              <li>√çt nh·∫•t 1 k√Ω t·ª± ƒë·∫∑c bi·ªát</li>
            </ul>
          </div>
        </div>
        <div class="modal-footer">
          <button
            class="btn-secondary"
            onclick="closeModal('changePasswordModal')"
          >
            H·ªßy
          </button>
          <button class="btn-primary" onclick="changePassword()">
            ƒê·ªïi M·∫≠t Kh·∫©u
          </button>
        </div>
      </div>
    </div>

    <!-- Login History Modal -->
    <div id="loginHistoryModal" class="modal">
      <div class="modal-content modal-large">
        <div class="modal-header">
          <h2>
            <img
              src="../icon/lich_su_tham_gia.png"
              alt="History"
              class="inline-icon"
            />
            L·ªãch S·ª≠ ƒêƒÉng Nh·∫≠p
          </h2>
          <button class="modal-close" onclick="closeModal('loginHistoryModal')">
            &times;
          </button>
        </div>
        <div class="modal-body">
          <div class="login-history-list">
            <div class="history-item">
              <div class="history-icon success">üñ•Ô∏è</div>
              <div class="history-details">
                <div class="history-device">Windows - Chrome</div>
                <div class="history-location">H√† N·ªôi, Vi·ªát Nam</div>
                <div class="history-ip">IP: 123.456.789.012</div>
              </div>
              <div class="history-time">
                <div class="history-date">09/12/2025</div>
                <div class="history-clock">14:30</div>
              </div>
              <div class="history-status current">Hi·ªán t·∫°i</div>
            </div>
            <div class="history-item">
              <div class="history-icon info">üì±</div>
              <div class="history-details">
                <div class="history-device">iPhone - Safari</div>
                <div class="history-location">H·ªì Ch√≠ Minh, Vi·ªát Nam</div>
                <div class="history-ip">IP: 192.168.1.100</div>
              </div>
              <div class="history-time">
                <div class="history-date">08/12/2025</div>
                <div class="history-clock">09:15</div>
              </div>
              <div class="history-status">Th√†nh c√¥ng</div>
            </div>
            <div class="history-item">
              <div class="history-icon success">üñ•Ô∏è</div>
              <div class="history-details">
                <div class="history-device">Windows - Firefox</div>
                <div class="history-location">ƒê√† N·∫µng, Vi·ªát Nam</div>
                <div class="history-ip">IP: 103.200.20.30</div>
              </div>
              <div class="history-time">
                <div class="history-date">07/12/2025</div>
                <div class="history-clock">18:45</div>
              </div>
              <div class="history-status">Th√†nh c√¥ng</div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn-primary" onclick="closeModal('loginHistoryModal')">
            ƒê√≥ng
          </button>
        </div>
      </div>
    </div>

    <!-- Backup Data Modal -->
    <div id="backupDataModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>
            <img src="../icon/tro_choi.png" alt="Backup" class="inline-icon" />
            Sao L∆∞u D·ªØ Li·ªáu
          </h2>
          <button class="modal-close" onclick="closeModal('backupDataModal')">
            &times;
          </button>
        </div>
        <div class="modal-body">
          <div class="backup-info">
            <p>Sao l∆∞u to√†n b·ªô d·ªØ li·ªáu qu·∫£n tr·ªã vi√™n bao g·ªìm:</p>
            <ul class="backup-list">
              <li>‚úì Th√¥ng tin t√†i kho·∫£n</li>
              <li>‚úì L·ªãch s·ª≠ v√≤ng quay</li>
              <li>‚úì Danh s√°ch ng∆∞·ªùi ch∆°i</li>
              <li>‚úì D·ªØ li·ªáu giao d·ªãch</li>
              <li>‚úì C√†i ƒë·∫∑t h·ªá th·ªëng</li>
            </ul>
          </div>
          <div class="backup-options">
            <div class="backup-option">
              <input
                type="radio"
                id="backup-json"
                name="backup-format"
                value="json"
                checked
                title="ƒê·ªãnh d·∫°ng JSON"
              />
              <label for="backup-json">
                <div class="option-title">JSON</div>
                <div class="option-desc">ƒê·ªãnh d·∫°ng d·ªØ li·ªáu chu·∫©n</div>
              </label>
            </div>
            <div class="backup-option">
              <input
                type="radio"
                id="backup-csv"
                name="backup-format"
                value="csv"
                title="ƒê·ªãnh d·∫°ng CSV"
              />
              <label for="backup-csv">
                <div class="option-title">CSV</div>
                <div class="option-desc">D·ªÖ ƒë·ªçc v·ªõi Excel</div>
              </label>
            </div>
          </div>
          <div class="last-backup">
            <p>Sao l∆∞u g·∫ßn nh·∫•t: <strong>05/12/2025 - 10:30</strong></p>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn-secondary" onclick="closeModal('backupDataModal')">
            H·ªßy
          </button>
          <button class="btn-primary" onclick="backupData()">T·∫£i Xu·ªëng</button>
        </div>
      </div>
    </div>

    <!-- Logout All Modal -->
    <div id="logoutAllModal" class="modal">
      <div class="modal-content modal-small">
        <div class="modal-header">
          <h2>
            <img src="../icon/xoa.png" alt="Logout" class="inline-icon" />
            ƒêƒÉng Xu·∫•t T·∫•t C·∫£
          </h2>
          <button class="modal-close" onclick="closeModal('logoutAllModal')">
            &times;
          </button>
        </div>
        <div class="modal-body">
          <div class="warning-box">
            <div class="warning-icon">‚ö†Ô∏è</div>
            <div class="warning-text">
              <p><strong>C·∫£nh b√°o!</strong></p>
              <p>
                H√†nh ƒë·ªông n√†y s·∫Ω ƒëƒÉng xu·∫•t kh·ªèi t·∫•t c·∫£ c√°c thi·∫øt b·ªã ƒëang ƒëƒÉng
                nh·∫≠p.
              </p>
              <p>B·∫°n s·∫Ω c·∫ßn ƒëƒÉng nh·∫≠p l·∫°i tr√™n t·∫•t c·∫£ c√°c thi·∫øt b·ªã.</p>
            </div>
          </div>
          <div class="logout-summary">
            <p>S·ªë thi·∫øt b·ªã ƒëang ho·∫°t ƒë·ªông: <strong>3 thi·∫øt b·ªã</strong></p>
            <ul>
              <li>Windows - Chrome (Hi·ªán t·∫°i)</li>
              <li>iPhone - Safari</li>
              <li>Windows - Firefox</li>
            </ul>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn-secondary" onclick="closeModal('logoutAllModal')">
            H·ªßy
          </button>
          <button class="btn-danger" onclick="logoutAll()">
            ƒêƒÉng Xu·∫•t T·∫•t C·∫£
          </button>
        </div>
      </div>
    </div>

    <script src="../js/lottery.js"></script>
    <script>
      // Load admin profile data
      document.addEventListener("DOMContentLoaded", async () => {
        // Load stats from localStorage
        const adminStats = JSON.parse(
          localStorage.getItem("adminStats") ||
            '{"lotteries":0,"players":0,"volume":0,"winners":0,"tickets":0,"revenue":0}'
        );

        document.getElementById("total-lotteries").textContent =
          adminStats.lotteries || 0;
        document.getElementById("quick-lotteries").textContent =
          adminStats.lotteries || 0;
        document.getElementById("total-players").textContent =
          adminStats.players || 0;
        document.getElementById("quick-players").textContent =
          adminStats.players || 0;
        document.getElementById("total-volume").textContent = (
          adminStats.volume || 0
        ).toFixed(3);
        document.getElementById("total-winners").textContent =
          adminStats.winners || 0;
        document.getElementById("quick-winners").textContent =
          adminStats.winners || 0;
        document.getElementById("total-tickets").textContent =
          adminStats.tickets || 0;
        document.getElementById("total-revenue").textContent = (
          adminStats.revenue || 0
        ).toFixed(3);
      });

      // Modal functions
      function openModal(modalId) {
        const modal = document.getElementById(modalId);
        modal.classList.add("show");
        document.body.style.overflow = "hidden";
      }

      function closeModal(modalId) {
        const modal = document.getElementById(modalId);
        modal.classList.remove("show");
        document.body.style.overflow = "auto";
      }

      // Close modal when clicking outside
      window.onclick = function (event) {
        if (event.target.classList.contains("modal")) {
          event.target.classList.remove("show");
          document.body.style.overflow = "auto";
        }
      };

      // Change Password
      function changePassword() {
        const currentPassword =
          document.getElementById("current-password").value;
        const newPassword = document.getElementById("new-password").value;
        const confirmPassword =
          document.getElementById("confirm-password").value;

        if (!currentPassword || !newPassword || !confirmPassword) {
          alert("Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin");
          return;
        }

        if (newPassword !== confirmPassword) {
          alert("M·∫≠t kh·∫©u x√°c nh·∫≠n kh√¥ng kh·ªõp");
          return;
        }

        if (newPassword.length < 8) {
          alert("M·∫≠t kh·∫©u ph·∫£i c√≥ √≠t nh·∫•t 8 k√Ω t·ª±");
          return;
        }

        // Simulate password change
        alert("ƒê·ªïi m·∫≠t kh·∫©u th√†nh c√¥ng!");
        closeModal("changePasswordModal");
        document.getElementById("current-password").value = "";
        document.getElementById("new-password").value = "";
        document.getElementById("confirm-password").value = "";
      }

      // Backup Data
      function backupData() {
        const format = document.querySelector(
          'input[name="backup-format"]:checked'
        ).value;
        const adminStats = JSON.parse(
          localStorage.getItem("adminStats") || "{}"
        );

        const backupData = {
          exportDate: new Date().toISOString(),
          format: format,
          data: {
            adminInfo: {
              email: "admin@etherlottery.com",
              joinDate: "01/01/2024",
              role: "Administrator",
            },
            stats: adminStats,
            exportTime: new Date().toLocaleString("vi-VN"),
          },
        };

        const dataStr =
          format === "json"
            ? JSON.stringify(backupData, null, 2)
            : convertToCSV(backupData);

        const blob = new Blob([dataStr], {
          type: format === "json" ? "application/json" : "text/csv",
        });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = `admin-backup-${Date.now()}.${format}`;
        a.click();
        URL.revokeObjectURL(url);

        alert("ƒê√£ t·∫£i xu·ªëng file sao l∆∞u!");
        closeModal("backupDataModal");
      }

      function convertToCSV(data) {
        return (
          "Email,Join Date,Role,Export Time\n" +
          `${data.data.adminInfo.email},${data.data.adminInfo.joinDate},${data.data.adminInfo.role},${data.data.exportTime}`
        );
      }

      // Logout All
      function logoutAll() {
        if (confirm("B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën ƒëƒÉng xu·∫•t t·∫•t c·∫£ thi·∫øt b·ªã?")) {
          localStorage.clear();
          alert("ƒê√£ ƒëƒÉng xu·∫•t kh·ªèi t·∫•t c·∫£ thi·∫øt b·ªã!");
          closeModal("logoutAllModal");
          setTimeout(() => {
            window.location.href = "login.html";
          }, 1000);
        }
      }
    </script>
  </body>
</html>
