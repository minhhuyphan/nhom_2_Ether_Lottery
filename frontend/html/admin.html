<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Ether Lottery - Admin Dashboard</title>
    <!-- Modular CSS -->
    <link rel="stylesheet" href="../css/variables.css" />
    <link rel="stylesheet" href="../css/base.css" />
    <link rel="stylesheet" href="../css/navigation.css" />
    <link rel="stylesheet" href="../css/buttons.css" />
    <link rel="stylesheet" href="../css/icons.css" />
    <link rel="stylesheet" href="../css/components.css" />
    <link rel="stylesheet" href="../css/responsive.css" />
    <link rel="stylesheet" href="../css/admin.css" />
    <script src="../js/theme.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/web3@1.8.0/dist/web3.min.js"></script>
  </head>
  <body>
    <div id="app">
      <!-- Sidebar Navigation -->
      <aside class="admin-sidebar">
        <div class="sidebar-header">
          <div class="logo">
            <img src="../icon/logo.png" alt="Logo" class="logo-img" />
            <span>Ether Lottery</span>
          </div>
        </div>

        <nav class="sidebar-nav">
          <a href="admin.html" class="sidebar-item active">
            <img
              src="../icon/tro_choi.png"
              alt="Lottery"
              class="sidebar-icon"
            />
            <span>Quay Số Trúng Thưởng</span>
          </a>
          <a href="admin-history.html" class="sidebar-item">
            <img
              src="../icon/lich_su_tham_gia.png"
              alt="History"
              class="sidebar-icon"
            />
            <span>Lịch Sử</span>
          </a>
          <a href="admin-profile.html" class="sidebar-item">
            <img src="../icon/ho_so.png" alt="Profile" class="sidebar-icon" />
            <span>Hồ Sơ Admin</span>
          </a>
          <a href="admin-finance.html" class="sidebar-item">
            <img
              src="../icon/tui_tien.png"
              alt="Finance"
              class="sidebar-icon"
            />
            <span>Tài Chính</span>
          </a>
        </nav>

        <div class="sidebar-footer">
          <a href="admin-profile.html" class="admin-profile admin-profile-link">
            <div class="admin-avatar">
              <img src="../icon/tai_khoan.png" alt="Admin" />
            </div>
            <div class="admin-info">
              <div class="admin-name">admin</div>
              <div class="admin-role">Administrator</div>
            </div>
          </a>
        </div>
      </aside>

      <!-- Main Content Area -->
      <main class="admin-main">
        <!-- Top Bar -->
        <header class="admin-header">
          <div class="header-left">
            <h1>Quay Số Trúng Thưởng</h1>
            <div class="network-status">
              <span class="status-dot"></span>
              <span id="network-name">Sepolia Testnet</span>
            </div>
          </div>
          <div class="header-right">
            <a
              href="admin-notifications.html"
              class="icon-btn"
              title="Thông báo"
            >
              <img
                src="../icon/thong_bao.png"
                alt="Notifications"
                class="nav-icon-img"
              />
              <span class="notification-badge">3</span>
            </a>
            <a href="admin-settings.html" class="icon-btn" title="Cài đặt">
              <img
                src="../icon/cai_dat.png"
                alt="Settings"
                class="nav-icon-img"
              />
            </a>
          </div>
        </header>

        <!-- Dashboard Content -->
        <div class="admin-content">
          <!-- Lottery Draw Section -->
          <section class="draw-section">
            <div class="draw-card">
              <div class="draw-header">
                <img src="../icon/cup.png" alt="Trophy" class="inline-icon" />
                <h2>QUAY SỐ TRÚNG THƯỞNG</h2>
              </div>

              <div class="draw-animation">
                <div class="lottery-machine">
                  <div class="number-display-slots">
                    <div class="number-slot" id="slot-1"><span>1</span></div>
                    <div class="number-slot" id="slot-2"><span>2</span></div>
                    <div class="number-slot" id="slot-3"><span>3</span></div>
                    <div class="number-slot" id="slot-4"><span>4</span></div>
                    <div class="number-slot" id="slot-5"><span>5</span></div>
                    <div class="number-slot" id="slot-6"><span>6</span></div>
                  </div>

                  <button class="btn-draw" id="btn-draw">
                    <span class="btn-text">QUAY NGAY</span>
                    <span class="btn-loading hidden">
                      <img
                        src="../icon/xu_ly.png"
                        alt="Loading"
                        class="btn-icon-loading"
                      />
                      Đang quay...
                    </span>
                  </button>

                  <div class="draw-info">
                    <div class="info-box">
                      <div class="info-label">Phiên hiện tại:</div>
                      <div class="info-value" id="current-round">#1234</div>
                    </div>
                    <div class="info-box">
                      <div class="info-label">Tổng giải thưởng:</div>
                      <div class="info-value prize-value" id="prize-amount">
                        5.00 ETH
                      </div>
                      <div style="font-size: 0.85rem; color: var(--text-muted); margin-top: 6px;" id="server-time">--:-- --</div>
                    </div>
                    <div class="info-box">
                      <div class="info-label">Người trúng:</div>
                      <div class="info-value" id="winner-count">0</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

          <!-- Recent Results Section -->
          <section class="results-section">
            <div class="section-header">
              <h3>
                <img
                  src="../icon/lich_su_tham_gia.png"
                  alt="History"
                  class="inline-icon"
                />
                KẾT QUẢ PHIÊN GẦN ĐÂY
              </h3>
            </div>

            <div class="results-list">
              <div class="result-item">
                <div class="result-numbers">10 4 5 3 13</div>
                <div class="result-time">17:38:00M</div>
              </div>
              <div class="result-item">
                <div class="result-numbers">10 3 9 9 10</div>
                <div class="result-time">12:01:54M</div>
              </div>
              <div class="result-item">
                <div class="result-numbers">10 2 5 5 6</div>
                <div class="result-time">12:48:39M</div>
              </div>
              <div class="result-item">
                <div class="result-numbers">10 4 8 1 7</div>
                <div class="result-time">12:18:08M</div>
              </div>
              <div class="result-item">
                <div class="result-numbers">20 87 08 29</div>
                <div class="result-time">12:01:35M</div>
              </div>
              <div class="result-item highlight">
                <div class="result-numbers">20 89 10 57</div>
                <div class="result-time">12:04:35M</div>
                <div class="result-label">2,125,983.92$</div>
              </div>
              <div class="result-item">
                <div class="result-numbers">20 23 93 45</div>
                <div class="result-time">12:06:18M</div>
                <div class="result-label">2,125,983.82$</div>
              </div>
            </div>
          </section>

          <!-- Statistics Cards -->
          <section class="stats-section">
            <div class="stats-grid">
              <div class="stat-card">
                <div class="stat-icon">
                  <img src="../icon/nguoi_choi.png" alt="Players" />
                </div>
                <div class="stat-content">
                  <div class="stat-label">Tổng Người Chơi</div>
                  <div class="stat-value" id="total-players">1,234</div>
                  <div class="stat-change positive">+12.5%</div>
                </div>
              </div>

              <div class="stat-card">
                <div class="stat-icon">
                  <img src="../icon/ve.png" alt="Tickets" />
                </div>
                <div class="stat-content">
                  <div class="stat-label">Vé Đã Bán</div>
                  <div class="stat-value" id="total-tickets">5,678</div>
                  <div class="stat-change positive">+8.3%</div>
                </div>
              </div>

              <div class="stat-card">
                <div class="stat-icon">
                  <img src="../icon/eth_thang.png" alt="Revenue" />
                </div>
                <div class="stat-content">
                  <div class="stat-label">Tổng Doanh Thu</div>
                  <div class="stat-value" id="total-revenue">125.5 ETH</div>
                  <div class="stat-change positive">+15.7%</div>
                </div>
              </div>

              <div class="stat-card">
                <div class="stat-icon">
                  <img src="../icon/cup.png" alt="Winners" />
                </div>
                <div class="stat-content">
                  <div class="stat-label">Người Thắng Hôm Nay</div>
                  <div class="stat-value" id="today-winners">23</div>
                  <div class="stat-change negative">-5.2%</div>
                </div>
              </div>
            </div>
          </section>

          <!-- Recent Tickets Table -->
          <section class="tickets-section">
            <div class="section-header">
              <h3>
                <img src="../icon/ve.png" alt="Tickets" class="inline-icon" />
                Vé Mới Được Mua
              </h3>
              <button class="btn-secondary" id="btn-refresh-tickets">
                Làm mới
              </button>
            </div>

            <div class="table-container">
              <table class="data-table table-tickets">
                <thead>
                  <tr>
                    <th>#</th>
                    <th>Người Chơi</th>
                    <th>Số Vé</th>
                    <th>Ví</th>
                    <th>Giá Tiền</th>
                    <th>Transaction</th>
                    <th>Ngày Mua</th>
                    <th>Trạng Thái</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td
                      colspan="8"
                      style="text-align: center; color: var(--text-muted)"
                    >
                      Đang tải...
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </section>

          <!-- Recent Players Table -->
          <section class="players-section">
            <div class="section-header">
              <h3>
                <img
                  src="../icon/ho_so.png"
                  alt="Players"
                  class="inline-icon"
                />
                Người Chơi Gần Đây
              </h3>
              <button class="btn-secondary">Xem tất cả</button>
            </div>

            <div class="table-container">
              <table class="data-table table-users">
                <thead>
                  <tr>
                    <th>#</th>
                    <th>Tên Người Dùng</th>
                    <th>Email</th>
                    <th>Ví</th>
                    <th>Số Dư</th>
                    <th>Ngày Tham Gia</th>
                    <th>Lần Đăng Nhập Cuối</th>
                    <th>Trạng Thái</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>1</td>
                    <td>player1</td>
                    <td>player1@email.com</td>
                    <td>0x742d...3a9c</td>
                    <td>0.50 ETH</td>
                    <td>20/01/2026</td>
                    <td>20/01/2026</td>
                    <td><span class="badge badge-active">Hoạt động</span></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </section>
        </div>
      </main>
    </div>

    <!-- Schedule Draw Modal -->
    <div class="modal" id="schedule-draw-modal" style="display: none">
      <div class="modal-content">
        <div class="modal-header">
          <h2>ĐẶT LỊCH QUAY SỐ</h2>
          <button class="btn-close" id="btn-close-schedule-modal">
            &times;
          </button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label for="schedule-date">Ngày quay:</label>
            <input type="date" id="schedule-date" class="form-input" required />
          </div>
          <div class="form-group">
            <label for="schedule-time">Giờ quay:</label>
            <input type="time" id="schedule-time" class="form-input" required />
          </div>
          <div class="form-group">
            <label>Chọn số trúng thưởng:</label>
            <div class="number-input-group">
              <input
                type="number"
                min="0"
                max="9"
                class="schedule-number-input"
                placeholder="Số 1"
                required
              />
              <input
                type="number"
                min="0"
                max="9"
                class="schedule-number-input"
                placeholder="Số 2"
                required
              />
              <input
                type="number"
                min="0"
                max="9"
                class="schedule-number-input"
                placeholder="Số 3"
                required
              />
              <input
                type="number"
                min="0"
                max="9"
                class="schedule-number-input"
                placeholder="Số 4"
                required
              />
              <input
                type="number"
                min="0"
                max="9"
                class="schedule-number-input"
                placeholder="Số 5"
                required
              />
              <input
                type="number"
                min="0"
                max="9"
                class="schedule-number-input"
                placeholder="Số 6"
                required
              />
            </div>
          </div>
    <script src="../js/admin.js?v=6"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        initWeb3();
      });
    </script>
  </body>
</html>
