<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Ether Lottery - L·ªãch S·ª≠ Ho·∫°t ƒê·ªông</title>
    <!-- Modular CSS -->
    <link rel="stylesheet" href="../css/variables.css" />
    <link rel="stylesheet" href="../css/base.css" />
    <link rel="stylesheet" href="../css/navigation.css" />
    <link rel="stylesheet" href="../css/buttons.css" />
    <link rel="stylesheet" href="../css/icons.css" />
    <link rel="stylesheet" href="../css/components.css" />
    <link rel="stylesheet" href="../css/responsive.css" />
    <link rel="stylesheet" href="../css/admin.css" />
    <link rel="stylesheet" href="../css/admin-profile.css" />
    <link rel="stylesheet" href="../css/admin-history.css" />
    <script src="../js/theme.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/web3@1.8.0/dist/web3.min.js"></script>
  </head>
  <body>
    <div id="app">
      <!-- Sidebar Navigation -->
      <aside class="admin-sidebar">
        <div class="sidebar-header">
          <div class="logo">
            <img src="../icon/logo.png" alt="Logo" class="logo-img" />
            <span>Ether Lottery</span>
          </div>
        </div>

        <nav class="sidebar-nav">
          <a href="admin.html" class="sidebar-item">
            <img
              src="../icon/tro_choi.png"
              alt="Lottery"
              class="sidebar-icon"
            />
            <span>Quay S·ªë Tr√∫ng Th∆∞·ªüng</span>
          </a>
          <a href="admin-history.html" class="sidebar-item active">
            <img
              src="../icon/lich_su_tham_gia.png"
              alt="History"
              class="sidebar-icon"
            />
            <span>L·ªãch S·ª≠</span>
          </a>
          <a href="admin-profile.html" class="sidebar-item">
            <img src="../icon/ho_so.png" alt="Profile" class="sidebar-icon" />
            <span>H·ªì S∆° Admin</span>
          </a>
          <a href="admin-finance.html" class="sidebar-item">
            <img
              src="../icon/tui_tien.png"
              alt="Finance"
              class="sidebar-icon"
            />
            <span>T√†i Ch√≠nh</span>
          </a>
        </nav>

        <div class="sidebar-footer">
          <a
            href="admin-profile.html"
            class="admin-profile"
            style="cursor: pointer; text-decoration: none"
          >
            <div class="admin-avatar">
              <img src="../icon/tai_khoan.png" alt="Admin" />
            </div>
            <div class="admin-info">
              <div class="admin-name">admin</div>
              <div class="admin-role">Administrator</div>
            </div>
          </a>
          <a href="login.html" class="btn-logout"> <span>‚Üê</span> ƒêƒÉng Xu·∫•t </a>
        </div>
      </aside>

      <!-- Main Content Area -->
      <main class="admin-main">
        <!-- Top Bar -->
        <header class="admin-header">
          <div class="header-left">
            <h1>
              <img
                src="../icon/lich_su_tham_gia.png"
                alt="History"
                class="inline-icon"
              />
              L·ªãch S·ª≠ Ho·∫°t ƒê·ªông
            </h1>
          </div>
          <div class="header-right">
            <div class="network-status">
              <span class="status-dot"></span>
              <span id="network-name">Sepolia Testnet</span>
            </div>
            <button class="btn-primary" id="connect-wallet-btn">
              <span>ü¶ä</span>
              <span id="wallet-status">Connect MetaMask</span>
            </button>
          </div>
        </header>

        <!-- History Content -->
        <div class="admin-content">
          <!-- Filter Section -->
          <div class="history-filters">
            <div class="filter-group">
              <label for="filter-type">Lo·∫°i Ho·∫°t ƒê·ªông:</label>
              <select id="filter-type" class="filter-select">
                <option value="all">T·∫•t c·∫£</option>
                <option value="winner">Ch·ªçn ng∆∞·ªùi th·∫Øng</option>
                <option value="player">Ng∆∞·ªùi ch∆°i m·ªõi</option>
                <option value="lottery">V√≤ng quay m·ªõi</option>
                <option value="ticket">Mua v√©</option>
              </select>
            </div>
            <div class="filter-group">
              <label for="filter-date">Th·ªùi Gian:</label>
              <select id="filter-date" class="filter-select">
                <option value="all">T·∫•t c·∫£</option>
                <option value="today">H√¥m nay</option>
                <option value="week">7 ng√†y qua</option>
                <option value="month">30 ng√†y qua</option>
              </select>
            </div>
            <button class="btn-primary filter-btn">
              <img src="../icon/thong_ke.png" alt="Filter" class="btn-icon" />
              L·ªçc
            </button>
          </div>

          <!-- Statistics Overview -->
          <div class="history-stats">
            <div class="history-stat-card">
              <div class="stat-icon-wrapper success">
                <img src="../icon/cup.png" alt="Winners" />
              </div>
              <div class="stat-info">
                <div class="stat-number" id="total-winners-picked">0</div>
                <div class="stat-label">Ng∆∞·ªùi Th·∫Øng</div>
              </div>
            </div>
            <div class="history-stat-card">
              <div class="stat-icon-wrapper info">
                <img src="../icon/nguoi_choi.png" alt="Players" />
              </div>
              <div class="stat-info">
                <div class="stat-number" id="total-new-players">0</div>
                <div class="stat-label">Ng∆∞·ªùi Ch∆°i M·ªõi</div>
              </div>
            </div>
            <div class="history-stat-card">
              <div class="stat-icon-wrapper warning">
                <img src="../icon/tro_choi.png" alt="Lotteries" />
              </div>
              <div class="stat-info">
                <div class="stat-number" id="total-lotteries-created">0</div>
                <div class="stat-label">V√≤ng Quay M·ªõi</div>
              </div>
            </div>
            <div class="history-stat-card">
              <div class="stat-icon-wrapper primary">
                <img src="../icon/ve.png" alt="Tickets" />
              </div>
              <div class="stat-info">
                <div class="stat-number" id="total-tickets-sold">0</div>
                <div class="stat-label">V√© ƒê√£ B√°n</div>
              </div>
            </div>
          </div>

          <!-- Activity Timeline -->
          <div class="profile-card activity-card">
            <div class="card-header">
              <h2>
                <img
                  src="../icon/lich_su_tham_gia.png"
                  alt="Timeline"
                  class="inline-icon"
                />
                Timeline Ho·∫°t ƒê·ªông
              </h2>
              <div class="timeline-actions">
                <button class="btn-secondary">
                  <img src="../icon/coppy.png" alt="Export" class="btn-icon" />
                  Xu·∫•t CSV
                </button>
              </div>
            </div>

            <div class="activity-timeline" id="activity-timeline">
              <!-- Success Activity -->
              <div class="timeline-item success">
                <div class="timeline-dot"></div>
                <div class="timeline-content">
                  <div class="activity-header">
                    <div class="activity-icon">
                      <img src="../icon/cup.png" alt="Winner" />
                    </div>
                    <div class="activity-info">
                      <div class="activity-title">ƒê√£ ch·ªçn ng∆∞·ªùi th·∫Øng</div>
                      <div class="activity-description">
                        V√≤ng #42 ‚Ä¢ Ng∆∞·ªùi th·∫Øng: 0x1234...5678
                      </div>
                    </div>
                  </div>
                  <div class="activity-meta">
                    <span class="activity-time">2 gi·ªù tr∆∞·ªõc</span>
                    <span class="activity-amount success">+0.033 ETH</span>
                  </div>
                </div>
              </div>

              <!-- Info Activity -->
              <div class="timeline-item info">
                <div class="timeline-dot"></div>
                <div class="timeline-content">
                  <div class="activity-header">
                    <div class="activity-icon">
                      <img src="../icon/nguoi_choi.png" alt="Player" />
                    </div>
                    <div class="activity-info">
                      <div class="activity-title">Ng∆∞·ªùi ch∆°i m·ªõi tham gia</div>
                      <div class="activity-description">
                        ƒê·ªãa ch·ªâ: 0x9876...4321
                      </div>
                    </div>
                  </div>
                  <div class="activity-meta">
                    <span class="activity-time">5 gi·ªù tr∆∞·ªõc</span>
                    <span class="activity-tag">M·ªõi</span>
                  </div>
                </div>
              </div>

              <!-- Warning Activity -->
              <div class="timeline-item warning">
                <div class="timeline-dot"></div>
                <div class="timeline-content">
                  <div class="activity-header">
                    <div class="activity-icon">
                      <img src="../icon/tro_choi.png" alt="Lottery" />
                    </div>
                    <div class="activity-info">
                      <div class="activity-title">B·∫Øt ƒë·∫ßu v√≤ng quay m·ªõi</div>
                      <div class="activity-description">
                        V√≤ng #43 ‚Ä¢ Gi√° v√©: 0.011 ETH
                      </div>
                    </div>
                  </div>
                  <div class="activity-meta">
                    <span class="activity-time">1 ng√†y tr∆∞·ªõc</span>
                    <span class="activity-tag">ƒêang di·ªÖn ra</span>
                  </div>
                </div>
              </div>

              <!-- Secondary Activity -->
              <div class="timeline-item secondary">
                <div class="timeline-dot"></div>
                <div class="timeline-content">
                  <div class="activity-header">
                    <div class="activity-icon">
                      <img src="../icon/ve.png" alt="Ticket" />
                    </div>
                    <div class="activity-info">
                      <div class="activity-title">V√© m·ªõi ƒë∆∞·ª£c mua</div>
                      <div class="activity-description">
                        15 v√© ƒë√£ b√°n trong 24h qua
                      </div>
                    </div>
                  </div>
                  <div class="activity-meta">
                    <span class="activity-time">2 ng√†y tr∆∞·ªõc</span>
                    <span class="activity-amount">0.165 ETH</span>
                  </div>
                </div>
              </div>

              <!-- More activities -->
              <div class="timeline-item success">
                <div class="timeline-dot"></div>
                <div class="timeline-content">
                  <div class="activity-header">
                    <div class="activity-icon">
                      <img src="../icon/cup.png" alt="Winner" />
                    </div>
                    <div class="activity-info">
                      <div class="activity-title">ƒê√£ ch·ªçn ng∆∞·ªùi th·∫Øng</div>
                      <div class="activity-description">
                        V√≤ng #41 ‚Ä¢ Ng∆∞·ªùi th·∫Øng: 0xabcd...ef12
                      </div>
                    </div>
                  </div>
                  <div class="activity-meta">
                    <span class="activity-time">3 ng√†y tr∆∞·ªõc</span>
                    <span class="activity-amount success">+0.045 ETH</span>
                  </div>
                </div>
              </div>

              <div class="timeline-item info">
                <div class="timeline-dot"></div>
                <div class="timeline-content">
                  <div class="activity-header">
                    <div class="activity-icon">
                      <img src="../icon/nguoi_choi.png" alt="Player" />
                    </div>
                    <div class="activity-info">
                      <div class="activity-title">
                        5 ng∆∞·ªùi ch∆°i m·ªõi tham gia
                      </div>
                      <div class="activity-description">
                        TƒÉng tr∆∞·ªüng ƒë·ªôt bi·∫øn trong gi·ªù qua
                      </div>
                    </div>
                  </div>
                  <div class="activity-meta">
                    <span class="activity-time">4 ng√†y tr∆∞·ªõc</span>
                    <span class="activity-tag">Hot</span>
                  </div>
                </div>
              </div>

              <div class="timeline-item warning">
                <div class="timeline-dot"></div>
                <div class="timeline-content">
                  <div class="activity-header">
                    <div class="activity-icon">
                      <img src="../icon/tro_choi.png" alt="Lottery" />
                    </div>
                    <div class="activity-info">
                      <div class="activity-title">B·∫Øt ƒë·∫ßu v√≤ng quay m·ªõi</div>
                      <div class="activity-description">
                        V√≤ng #42 ‚Ä¢ Gi√° v√©: 0.011 ETH
                      </div>
                    </div>
                  </div>
                  <div class="activity-meta">
                    <span class="activity-time">5 ng√†y tr∆∞·ªõc</span>
                    <span class="activity-tag">Ho√†n th√†nh</span>
                  </div>
                </div>
              </div>

              <div class="timeline-item secondary">
                <div class="timeline-dot"></div>
                <div class="timeline-content">
                  <div class="activity-header">
                    <div class="activity-icon">
                      <img src="../icon/ve.png" alt="Ticket" />
                    </div>
                    <div class="activity-info">
                      <div class="activity-title">K·ª∑ l·ª•c v√© b√°n ra</div>
                      <div class="activity-description">
                        50 v√© ƒë√£ b√°n trong 1 ng√†y
                      </div>
                    </div>
                  </div>
                  <div class="activity-meta">
                    <span class="activity-time">1 tu·∫ßn tr∆∞·ªõc</span>
                    <span class="activity-amount">0.550 ETH</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Load More Button -->
            <div class="load-more-section">
              <button class="btn-secondary load-more-btn">
                <img src="../icon/xu_ly.png" alt="Load" class="btn-icon" />
                T·∫£i Th√™m Ho·∫°t ƒê·ªông
              </button>
            </div>
          </div>
        </div>
      </main>
    </div>

    <script src="../js/lottery.js"></script>
    <script>
      // Load history data
      document.addEventListener("DOMContentLoaded", () => {
        // Load stats from localStorage
        const historyStats = JSON.parse(
          localStorage.getItem("historyStats") ||
            '{"winnersPicked":42,"newPlayers":156,"lotteriesCreated":43,"ticketsSold":987}'
        );

        document.getElementById("total-winners-picked").textContent =
          historyStats.winnersPicked || 0;
        document.getElementById("total-new-players").textContent =
          historyStats.newPlayers || 0;
        document.getElementById("total-lotteries-created").textContent =
          historyStats.lotteriesCreated || 0;
        document.getElementById("total-tickets-sold").textContent =
          historyStats.ticketsSold || 0;
      });
    </script>
  </body>
</html>
